#!/usr/bin/env bash

image_tag="biopod/openeye-toolkits:2021.2.0"

if [ "${OE_LICENSE}" == "" ]
then
    echo "OE_LICENSE environment variable not defined."
    exit
fi

if [ ! -f "${OE_LICENSE}" ]
then
    echo "${OE_LICENSE} defined in OE_LICENSE not found."
    exit
fi

echo "Starting ${image_tag} container in current dir -> $(pwd)"
docker run --rm -it \
       --mount type=bind,source=${OE_LICENSE},target=/app/oe_license.txt,readonly \
       --mount type=bind,source=$(realpath $(pwd)),target=/mnt \
       --user $(id -u):$(id -g) \
       ${image_tag}

